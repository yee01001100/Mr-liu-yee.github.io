<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://avatars.githubusercontent.com/u/127643341?v=4"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="# Minecraft 1.19.4 Fabric 开服指南

---

## 目录
1. [基础准备](#基础准备)
2. [服务端启动](#服务端启动)
3. [网络问题深度解析](#网络问题深度解析)
4. [防火墙设置](#防火墙设置)
5. [server.properties详解](#serverproperties详解)
6. [Minecraft 1.19.4 服务端管理注意事项指南](#Minecraft 1.19.4 服务端管理注意事项指南)
7. [网络诊断](#网络诊断)

---

# 基础准备

- 运行服务端需要一些基础准备工作，如jdk17或更高版本

以下是jdk的下载网址[Oracle-jdk](https://www.oracle.com/java/technologies/downloads/#jdk24-windows)

安装完成后可输入以下指令验证是否安装完成

```bash
#此指令可显示你已安装的Java版本
java -version
```

---

# 服务端启动

- 确认准备完全后，即可启动服务端

  请先将fabric服务端文件移至一个单独的文件夹，以下是fabric服务端文件下载地址[fabric-server](https://fabricmc.net/use/server/) **请注意版本对应!**

上述步骤完成后请在服务端文件所在文件夹的上方文件地址栏输入cmd以确保指令运行环境处在当前文件夹内，然后输入以下指令启动服务端

```bash
#此处假设服务端文件名为（fabric-server-mc.1.21.5-loader.0.16.14-launcher.1.0.3.jar），请根据实际情况做适当调整修改
java -jar fabric-server-mc.1.21.5-loader.0.16.14-launcher.1.0.3.jar
```

之后服务端将会启动，并展开文件

---

# 网络问题深度解析

---

## **Minecraft Fabric服务器网络连通性技术文档**
---

## **一、核心网络问题解析**
### **1. 局域网 vs 公网部署**
| **场景**   | **优势**         | **限制**                 | 适用场景                |
| ---------- | ---------------- | ------------------------ | ----------------------- |
| **局域网** | 超低延迟（<1ms） | 仅限同一物理网络设备访问 | 家庭/校园本地联机       |
| **公网**   | 全球可访问       | 依赖公网IP/带宽质量      | 商业服务器/远程好友联机 |

### **2. IPv4与IPv6协议对比**
```mermaid
graph LR
    A[IP协议] --> B[IPv4]
    A --> C[IPv6]
    B --> D[32位地址<br>4.3亿地址耗尽]
    B --> E[依赖NAT技术]
    C --> F[128位地址<br>340涧地址]
    C --> G[原生无NAT需求]
```

---

## **二、NAT技术深度解析**
### **1. NAT工作原理（以IPv4为例）**
```plaintext
 局域网设备                NAT路由器              公网
[192.168.1.10:25565]  --> 转换公网IP:端口 --> [玩家访问120.240.35.1:25565]
       ↑                                           |
       |___________ 数据包反向转换 ______________↓
```

### **2. NAT类型与影响**
| **类型**        | 端口映射方式           | 服务器兼容性    |
| --------------- | ---------------------- | --------------- |
| **全锥型NAT**   | 开放所有外部端口       | ★★★★★           |
| **受限锥型NAT** | 仅响应已连接IP         | ★★★☆☆           |
| **对称型NAT**   | 每次连接使用随机新端口 | ★☆☆☆☆（需穿透） |

---

## **三、公网IPv4部署关键问题**
### **1. 私网IP为何公网不可用？**
```plaintext
RFC 1918规定的私有地址范围：
• 10.0.0.0 - 10.255.255.255
• 172.16.0.0 - 172.31.255.255
• 192.168.0.0 - 192.168.255.255

这些地址在公网路由器中会被直接丢弃，导致：
  本地IP 192.168.1.100 → 公网玩家 → 数据包无法路由返回
```

### **2. 公网部署解决方案**
**步骤1：获取真实公网IP**

```bash
# 检测当前IP性质
curl ifconfig.me
# 若返回地址与路由器WAN口地址不一致 → 处于运营商级NAT（CGNAT）
```

**步骤2：端口转发配置（以TP-Link为例）**

```markdown
1. 登录路由器管理页（通常为192.168.0.1）
2. 转发规则 → 虚拟服务器 → 添加新条目：
   - 服务端口：25565
   - 内部IP：服务器本地IP（如192.168.1.100）
   - 协议：TCP/UDP
3. 保存并重启路由器
```

**步骤3：防火墙放行**

- 打开防火墙，开放服务端运行所需端口
- 或完全关闭防火墙（简单但不推荐）


---

## **四、IPv6部署方案**
### **1. 优势与配置要点**
```markdown
• 每个设备拥有**全球唯一公网地址**
• 无需端口转发/NAT
• 配置流程：
  1. 确认运营商支持IPv6（光猫开启IPv4/IPv6双栈）
  2. 路由器启用SLAAC/DHCPv6
  3. 服务器获取2408:8207:xxxx格式地址
```

### **2. 连接方式示例**
```yaml
# server.properties配置
server-ip=::
# 玩家直连地址
[2408:8207:abcd:ef01:1234:5678:9012:3456]:25565
```

---

## **五、连通性测试指南**
### **1. 诊断工具**
| **工具**     | 命令示例               | 检测目标     |
| ------------ | ---------------------- | ------------ |
| `ping`       | `ping server-ip`       | 基础连通性   |
| `telnet`     | `telnet ip 25565`      | 端口开放状态 |
| `traceroute` | `tracert 120.240.35.1` | 路由路径     |
| `nc`(Netcat) | `nc -zv ip 25565`      | 端口握手详情 |

### **2. 常见故障排查**
```markdown
1. **端口阻塞**：
   - 使用 https://portchecker.co 验证25565开放状态
   
2. **Windows防火墙拦截**：
   - 入站规则放行Java(TM) Platform SE binary

3. **运营商限制**：
   - 家庭宽带通常封锁80/443外所有端口 → 需备案开埠
```

---

## **六、进阶优化建议**
1. **动态DNS支持**（适用于非固定IP）
   
   ```markdown
   - 使用花生壳/No-IP服务绑定域名
   - 配置路由器DDNS自动更新
   ```
   
3. **IPv4/IPv6双栈部署**
   ```properties
   # fabric服务器启动参数
   java -Djava.net.preferIPv6Addresses=true -jar fabric-server-launch.jar
   ```

---

## **七、内网穿透解决方案**  
### **1. 内网穿透核心原理**
```plaintext
 玩家客户端 → 穿透服务器（公网） → 穿透客户端（本地） → Minecraft服务器
       ↑                                         |
       |___________ 反向隧道连接 __________________↓
```
> **技术本质**：通过第三方公网服务器建立'反向代理隧道'，绕过NAT限制

### **2. 主流穿透方案对比**
| **方案类型**      | 代表工具             | 延迟影响 | 配置复杂度 | 适用场景            |
| ----------------- | -------------------- | -------- | ---------- | ------------------- |
| **TCP/UDP隧道**   | frp / ngrok          | 20-50ms  | 中等       | 常规MC服务器        |
| **P2P穿透**       | ZeroTier / Tailscale | 5-15ms   | 简单       | 好友联机/低延迟需求 |
| **WebSocket隧道** | Cloudflared          | 50-100ms | 复杂       | 严格防火墙环境      |
| **商业托管服务**  | Playit.gg            | 30-80ms  | 极简       | 零配置快速部署      |

### **3. 详细配置指南**
#### **方案实例：frp穿透（推荐）**

- **sakurafrp**

  此网站提供了较为简便与廉价的局域网穿透工具，网址→[sakurafrp](https://www.natfrp.com/)

  下方为网站视频教学网址↓

  [都2025年了你还不会使用樱花来我的世界联机？[Minecraft樱花内网穿透（Natfrp）联机教程]](https://www.bilibili.com/video/BV1DdF4eJEBm/?spm_id_from=333.337.search-card.all.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

**注：上述为网络连通性专业文档，可配合下述视频搭配学习理解**

[基础开服教程](https://www.bilibili.com/video/BV1rq4y117uA/?spm_id_from=333.337.search-card.all.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[Windows命令初学者必需知道](https://www.bilibili.com/video/BV1xj411v7Xd/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[子网划分](https://www.bilibili.com/video/BV1HT411U7jV/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[【MC开服】插件、模组我全都要！mohist服务端教学](https://www.bilibili.com/video/BV1pS4y1B73f/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[Windows我的世界开服详细教程](https://www.bilibili.com/video/BV1NQ4y1U7nS/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[【mc开服】教你白嫖运营商公网ipv6跟好兄弟联机](https://www.bilibili.com/video/BV1Lb4y1o7SF/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[什么是NAT？一分钟搞懂网络地址转换的秘密！](https://www.bilibili.com/video/BV19EyVYVEye/?spm_id_from=333.337.search-card.all.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

- 以下为进阶视频教学

  [小白成神之路，网络知识看这一期足矣！软路由 桥接 端口转发 旁路由 单臂路由 IPv4 IPv6 DDNS](https://www.bilibili.com/video/BV1Gz4y1r791/?spm_id_from=333.337.search-card.all.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

# 防火墙设置

---

### **Minecraft Java版 Windows 开服防火墙设置指南**  
**核心目标**：允许合法流量进入服务器，阻止非法访问，保障服务器安全。">
<meta property="og:title" content="Minecraft 1.19.4 Fabric 开服指南">
<meta property="og:description" content="# Minecraft 1.19.4 Fabric 开服指南

---

## 目录
1. [基础准备](#基础准备)
2. [服务端启动](#服务端启动)
3. [网络问题深度解析](#网络问题深度解析)
4. [防火墙设置](#防火墙设置)
5. [server.properties详解](#serverproperties详解)
6. [Minecraft 1.19.4 服务端管理注意事项指南](#Minecraft 1.19.4 服务端管理注意事项指南)
7. [网络诊断](#网络诊断)

---

# 基础准备

- 运行服务端需要一些基础准备工作，如jdk17或更高版本

以下是jdk的下载网址[Oracle-jdk](https://www.oracle.com/java/technologies/downloads/#jdk24-windows)

安装完成后可输入以下指令验证是否安装完成

```bash
#此指令可显示你已安装的Java版本
java -version
```

---

# 服务端启动

- 确认准备完全后，即可启动服务端

  请先将fabric服务端文件移至一个单独的文件夹，以下是fabric服务端文件下载地址[fabric-server](https://fabricmc.net/use/server/) **请注意版本对应!**

上述步骤完成后请在服务端文件所在文件夹的上方文件地址栏输入cmd以确保指令运行环境处在当前文件夹内，然后输入以下指令启动服务端

```bash
#此处假设服务端文件名为（fabric-server-mc.1.21.5-loader.0.16.14-launcher.1.0.3.jar），请根据实际情况做适当调整修改
java -jar fabric-server-mc.1.21.5-loader.0.16.14-launcher.1.0.3.jar
```

之后服务端将会启动，并展开文件

---

# 网络问题深度解析

---

## **Minecraft Fabric服务器网络连通性技术文档**
---

## **一、核心网络问题解析**
### **1. 局域网 vs 公网部署**
| **场景**   | **优势**         | **限制**                 | 适用场景                |
| ---------- | ---------------- | ------------------------ | ----------------------- |
| **局域网** | 超低延迟（<1ms） | 仅限同一物理网络设备访问 | 家庭/校园本地联机       |
| **公网**   | 全球可访问       | 依赖公网IP/带宽质量      | 商业服务器/远程好友联机 |

### **2. IPv4与IPv6协议对比**
```mermaid
graph LR
    A[IP协议] --> B[IPv4]
    A --> C[IPv6]
    B --> D[32位地址<br>4.3亿地址耗尽]
    B --> E[依赖NAT技术]
    C --> F[128位地址<br>340涧地址]
    C --> G[原生无NAT需求]
```

---

## **二、NAT技术深度解析**
### **1. NAT工作原理（以IPv4为例）**
```plaintext
 局域网设备                NAT路由器              公网
[192.168.1.10:25565]  --> 转换公网IP:端口 --> [玩家访问120.240.35.1:25565]
       ↑                                           |
       |___________ 数据包反向转换 ______________↓
```

### **2. NAT类型与影响**
| **类型**        | 端口映射方式           | 服务器兼容性    |
| --------------- | ---------------------- | --------------- |
| **全锥型NAT**   | 开放所有外部端口       | ★★★★★           |
| **受限锥型NAT** | 仅响应已连接IP         | ★★★☆☆           |
| **对称型NAT**   | 每次连接使用随机新端口 | ★☆☆☆☆（需穿透） |

---

## **三、公网IPv4部署关键问题**
### **1. 私网IP为何公网不可用？**
```plaintext
RFC 1918规定的私有地址范围：
• 10.0.0.0 - 10.255.255.255
• 172.16.0.0 - 172.31.255.255
• 192.168.0.0 - 192.168.255.255

这些地址在公网路由器中会被直接丢弃，导致：
  本地IP 192.168.1.100 → 公网玩家 → 数据包无法路由返回
```

### **2. 公网部署解决方案**
**步骤1：获取真实公网IP**

```bash
# 检测当前IP性质
curl ifconfig.me
# 若返回地址与路由器WAN口地址不一致 → 处于运营商级NAT（CGNAT）
```

**步骤2：端口转发配置（以TP-Link为例）**

```markdown
1. 登录路由器管理页（通常为192.168.0.1）
2. 转发规则 → 虚拟服务器 → 添加新条目：
   - 服务端口：25565
   - 内部IP：服务器本地IP（如192.168.1.100）
   - 协议：TCP/UDP
3. 保存并重启路由器
```

**步骤3：防火墙放行**

- 打开防火墙，开放服务端运行所需端口
- 或完全关闭防火墙（简单但不推荐）


---

## **四、IPv6部署方案**
### **1. 优势与配置要点**
```markdown
• 每个设备拥有**全球唯一公网地址**
• 无需端口转发/NAT
• 配置流程：
  1. 确认运营商支持IPv6（光猫开启IPv4/IPv6双栈）
  2. 路由器启用SLAAC/DHCPv6
  3. 服务器获取2408:8207:xxxx格式地址
```

### **2. 连接方式示例**
```yaml
# server.properties配置
server-ip=::
# 玩家直连地址
[2408:8207:abcd:ef01:1234:5678:9012:3456]:25565
```

---

## **五、连通性测试指南**
### **1. 诊断工具**
| **工具**     | 命令示例               | 检测目标     |
| ------------ | ---------------------- | ------------ |
| `ping`       | `ping server-ip`       | 基础连通性   |
| `telnet`     | `telnet ip 25565`      | 端口开放状态 |
| `traceroute` | `tracert 120.240.35.1` | 路由路径     |
| `nc`(Netcat) | `nc -zv ip 25565`      | 端口握手详情 |

### **2. 常见故障排查**
```markdown
1. **端口阻塞**：
   - 使用 https://portchecker.co 验证25565开放状态
   
2. **Windows防火墙拦截**：
   - 入站规则放行Java(TM) Platform SE binary

3. **运营商限制**：
   - 家庭宽带通常封锁80/443外所有端口 → 需备案开埠
```

---

## **六、进阶优化建议**
1. **动态DNS支持**（适用于非固定IP）
   
   ```markdown
   - 使用花生壳/No-IP服务绑定域名
   - 配置路由器DDNS自动更新
   ```
   
3. **IPv4/IPv6双栈部署**
   ```properties
   # fabric服务器启动参数
   java -Djava.net.preferIPv6Addresses=true -jar fabric-server-launch.jar
   ```

---

## **七、内网穿透解决方案**  
### **1. 内网穿透核心原理**
```plaintext
 玩家客户端 → 穿透服务器（公网） → 穿透客户端（本地） → Minecraft服务器
       ↑                                         |
       |___________ 反向隧道连接 __________________↓
```
> **技术本质**：通过第三方公网服务器建立'反向代理隧道'，绕过NAT限制

### **2. 主流穿透方案对比**
| **方案类型**      | 代表工具             | 延迟影响 | 配置复杂度 | 适用场景            |
| ----------------- | -------------------- | -------- | ---------- | ------------------- |
| **TCP/UDP隧道**   | frp / ngrok          | 20-50ms  | 中等       | 常规MC服务器        |
| **P2P穿透**       | ZeroTier / Tailscale | 5-15ms   | 简单       | 好友联机/低延迟需求 |
| **WebSocket隧道** | Cloudflared          | 50-100ms | 复杂       | 严格防火墙环境      |
| **商业托管服务**  | Playit.gg            | 30-80ms  | 极简       | 零配置快速部署      |

### **3. 详细配置指南**
#### **方案实例：frp穿透（推荐）**

- **sakurafrp**

  此网站提供了较为简便与廉价的局域网穿透工具，网址→[sakurafrp](https://www.natfrp.com/)

  下方为网站视频教学网址↓

  [都2025年了你还不会使用樱花来我的世界联机？[Minecraft樱花内网穿透（Natfrp）联机教程]](https://www.bilibili.com/video/BV1DdF4eJEBm/?spm_id_from=333.337.search-card.all.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

**注：上述为网络连通性专业文档，可配合下述视频搭配学习理解**

[基础开服教程](https://www.bilibili.com/video/BV1rq4y117uA/?spm_id_from=333.337.search-card.all.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[Windows命令初学者必需知道](https://www.bilibili.com/video/BV1xj411v7Xd/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[子网划分](https://www.bilibili.com/video/BV1HT411U7jV/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[【MC开服】插件、模组我全都要！mohist服务端教学](https://www.bilibili.com/video/BV1pS4y1B73f/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[Windows我的世界开服详细教程](https://www.bilibili.com/video/BV1NQ4y1U7nS/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[【mc开服】教你白嫖运营商公网ipv6跟好兄弟联机](https://www.bilibili.com/video/BV1Lb4y1o7SF/?spm_id_from=333.1387.favlist.content.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

[什么是NAT？一分钟搞懂网络地址转换的秘密！](https://www.bilibili.com/video/BV19EyVYVEye/?spm_id_from=333.337.search-card.all.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

- 以下为进阶视频教学

  [小白成神之路，网络知识看这一期足矣！软路由 桥接 端口转发 旁路由 单臂路由 IPv4 IPv6 DDNS](https://www.bilibili.com/video/BV1Gz4y1r791/?spm_id_from=333.337.search-card.all.click&vd_source=c8d0f1ade16bb6d69206a3cdb0173a57)

# 防火墙设置

---

### **Minecraft Java版 Windows 开服防火墙设置指南**  
**核心目标**：允许合法流量进入服务器，阻止非法访问，保障服务器安全。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://yee01001100.github.io/Mr-liu-yee.github.io/post/Minecraft%201.19.4%20Fabric%20-kai-fu-zhi-nan.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/127643341?v=4">
<title>Minecraft 1.19.4 Fabric 开服指南</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">Minecraft 1.19.4 Fabric 开服指南</h1>
<div class="title-right">
    <a href="https://yee01001100.github.io/Mr-liu-yee.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/yee01001100/Mr-liu-yee.github.io/issues/2" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>Minecraft 1.19.4 Fabric 开服指南</h1>
<hr>
<h2>目录</h2>
<ol>
<li><a href="#%E5%9F%BA%E7%A1%80%E5%87%86%E5%A4%87">基础准备</a></li>
<li><a href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%90%AF%E5%8A%A8">服务端启动</a></li>
<li><a href="#%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90">网络问题深度解析</a></li>
<li><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE">防火墙设置</a></li>
<li><a href="#serverproperties%E8%AF%A6%E8%A7%A3">server.properties详解</a></li>
<li>[Minecraft 1.19.4 服务端管理注意事项指南](#Minecraft 1.19.4 服务端管理注意事项指南)</li>
<li><a href="#%E7%BD%91%E7%BB%9C%E8%AF%8A%E6%96%AD">网络诊断</a></li>
</ol>
<hr>
<h1>基础准备</h1>
<ul>
<li>运行服务端需要一些基础准备工作，如jdk17或更高版本</li>
</ul>
<p>以下是jdk的下载网址<a href="https://www.oracle.com/java/technologies/downloads/#jdk24-windows" rel="nofollow">Oracle-jdk</a></p>
<p>安装完成后可输入以下指令验证是否安装完成</p>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span>此指令可显示你已安装的Java版本</span>
java -version</pre></div>
<hr>
<h1>服务端启动</h1>
<ul>
<li>
<p>确认准备完全后，即可启动服务端</p>
<p>请先将fabric服务端文件移至一个单独的文件夹，以下是fabric服务端文件下载地址<a href="https://fabricmc.net/use/server/" rel="nofollow">fabric-server</a> <strong>请注意版本对应!</strong></p>
</li>
</ul>
<p>上述步骤完成后请在服务端文件所在文件夹的上方文件地址栏输入cmd以确保指令运行环境处在当前文件夹内，然后输入以下指令启动服务端</p>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span>此处假设服务端文件名为（fabric-server-mc.1.21.5-loader.0.16.14-launcher.1.0.3.jar），请根据实际情况做适当调整修改</span>
java -jar fabric-server-mc.1.21.5-loader.0.16.14-launcher.1.0.3.jar</pre></div>
<p>之后服务端将会启动，并展开文件</p>
<hr>
<h1>网络问题深度解析</h1>
<hr>
<h2><strong>Minecraft Fabric服务器网络连通性技术文档</strong></h2>
<hr>
<h2><strong>一、核心网络问题解析</strong></h2>
<h3><strong>1. 局域网 vs 公网部署</strong></h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th><strong>场景</strong></th>
<th><strong>优势</strong></th>
<th><strong>限制</strong></th>
<th>适用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>局域网</strong></td>
<td>超低延迟（&lt;1ms）</td>
<td>仅限同一物理网络设备访问</td>
<td>家庭/校园本地联机</td>
</tr>
<tr>
<td><strong>公网</strong></td>
<td>全球可访问</td>
<td>依赖公网IP/带宽质量</td>
<td>商业服务器/远程好友联机</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3><strong>2. IPv4与IPv6协议对比</strong></h3>
<div class="highlight highlight-source-mermaid"><pre class="notranslate"><span class="pl-k">graph</span> <span class="pl-c1">LR</span>
    <span class="pl-ent">A</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>IP协议<span class="pl-pds"><span class="pl-sg">]</span></span></span> <span class="pl-k">--&gt;</span> <span class="pl-ent">B</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>IPv4<span class="pl-pds"><span class="pl-sg">]</span></span></span>
    <span class="pl-ent">A</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">C</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>IPv6<span class="pl-pds"><span class="pl-sg">]</span></span></span>
    <span class="pl-ent">B</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">D</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>32位地址&lt;<span class="pl-ent">br</span>&gt;4.3亿地址耗尽<span class="pl-pds"><span class="pl-sg">]</span></span></span>
    <span class="pl-ent">B</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">E</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>依赖NAT技术<span class="pl-pds"><span class="pl-sg">]</span></span></span>
    <span class="pl-ent">C</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">F</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>128位地址&lt;<span class="pl-ent">br</span>&gt;340涧地址<span class="pl-pds"><span class="pl-sg">]</span></span></span>
    <span class="pl-ent">C</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">G</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>原生无NAT需求<span class="pl-pds"><span class="pl-sg">]</span></span></span></pre></div>
<hr>
<h2><strong>二、NAT技术深度解析</strong></h2>
<h3><strong>1. NAT工作原理（以IPv4为例）</strong></h3>
<pre lang="plaintext" class="notranslate"><code class="notranslate"> 局域网设备                NAT路由器              公网
[192.168.1.10:25565]  --&gt; 转换公网IP:端口 --&gt; [玩家访问120.240.35.1:25565]
       ↑                                           |
       |___________ 数据包反向转换 ______________↓
</code></pre>
<h3><strong>2. NAT类型与影响</strong></h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th><strong>类型</strong></th>
<th>端口映射方式</th>
<th>服务器兼容性</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>全锥型NAT</strong></td>
<td>开放所有外部端口</td>
<td>★★★★★</td>
</tr>
<tr>
<td><strong>受限锥型NAT</strong></td>
<td>仅响应已连接IP</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><strong>对称型NAT</strong></td>
<td>每次连接使用随机新端口</td>
<td>★☆☆☆☆（需穿透）</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<hr>
<h2><strong>三、公网IPv4部署关键问题</strong></h2>
<h3><strong>1. 私网IP为何公网不可用？</strong></h3>
<pre lang="plaintext" class="notranslate"><code class="notranslate">RFC 1918规定的私有地址范围：
• 10.0.0.0 - 10.255.255.255
• 172.16.0.0 - 172.31.255.255
• 192.168.0.0 - 192.168.255.255

这些地址在公网路由器中会被直接丢弃，导致：
  本地IP 192.168.1.100 → 公网玩家 → 数据包无法路由返回
</code></pre>
<h3><strong>2. 公网部署解决方案</strong></h3>
<p><strong>步骤1：获取真实公网IP</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 检测当前IP性质</span>
curl ifconfig.me
<span class="pl-c"><span class="pl-c">#</span> 若返回地址与路由器WAN口地址不一致 → 处于运营商级NAT（CGNAT）</span></pre></div>
<p><strong>步骤2：端口转发配置（以TP-Link为例）</strong></p>
<div class="highlight highlight-text-md"><pre class="notranslate"><span class="pl-s">1</span><span class="pl-v">.</span> 登录路由器管理页（通常为192.168.0.1）
<span class="pl-s">2</span><span class="pl-v">.</span> 转发规则 → 虚拟服务器 → 添加新条目：
   <span class="pl-v">-</span> 服务端口：25565
   <span class="pl-v">-</span> 内部IP：服务器本地IP（如192.168.1.100）
   <span class="pl-v">-</span> 协议：TCP/UDP
<span class="pl-s">3</span><span class="pl-v">.</span> 保存并重启路由器</pre></div>
<p><strong>步骤3：防火墙放行</strong></p>
<ul>
<li>打开防火墙，开放服务端运行所需端口</li>
<li>或完全关闭防火墙（简单但不推荐）</li>
</ul>
<hr>
<h2><strong>四、IPv6部署方案</strong></h2>
<h3><strong>1. 优势与配置要点</strong></h3>
<div class="highlight highlight-text-md"><pre class="notranslate">• 每个设备拥有<span class="pl-s">**</span>全球唯一公网地址<span class="pl-s">**</span>
• 无需端口转发/NAT
• 配置流程：
  <span class="pl-s">1</span><span class="pl-v">.</span> 确认运营商支持IPv6（光猫开启IPv4/IPv6双栈）
  <span class="pl-s">2</span><span class="pl-v">.</span> 路由器启用SLAAC/DHCPv6
  <span class="pl-s">3</span><span class="pl-v">.</span> 服务器获取2408:8207<span class="pl-s">:</span><span class="pl-en">xxxx</span>格式地址</pre></div>
<h3><strong>2. 连接方式示例</strong></h3>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> server.properties配置</span>
<span class="pl-ent">server-ip=:</span>:
<span class="pl-c"><span class="pl-c">#</span> 玩家直连地址</span>
<span class="pl-s">[2408:8207:abcd:ef01:1234:5678:9012:3456]:25565</span></pre></div>
<hr>
<h2><strong>五、连通性测试指南</strong></h2>
<h3><strong>1. 诊断工具</strong></h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th><strong>工具</strong></th>
<th>命令示例</th>
<th>检测目标</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">ping</code></td>
<td><code class="notranslate">ping server-ip</code></td>
<td>基础连通性</td>
</tr>
<tr>
<td><code class="notranslate">telnet</code></td>
<td><code class="notranslate">telnet ip 25565</code></td>
<td>端口开放状态</td>
</tr>
<tr>
<td><code class="notranslate">traceroute</code></td>
<td><code class="notranslate">tracert 120.240.35.1</code></td>
<td>路由路径</td>
</tr>
<tr>
<td><code class="notranslate">nc</code>(Netcat)</td>
<td><code class="notranslate">nc -zv ip 25565</code></td>
<td>端口握手详情</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3><strong>2. 常见故障排查</strong></h3>
<div class="highlight highlight-text-md"><pre class="notranslate"><span class="pl-s">1</span><span class="pl-v">.</span> <span class="pl-s">**</span>端口阻塞<span class="pl-s">**</span>：
   <span class="pl-v">-</span> 使用 <span class="pl-corl">https://portchecker.co</span> 验证25565开放状态
   
<span class="pl-s">2</span><span class="pl-v">.</span> <span class="pl-s">**</span>Windows防火墙拦截<span class="pl-s">**</span>：
   <span class="pl-v">-</span> 入站规则放行Java(TM) Platform SE binary

<span class="pl-s">3</span><span class="pl-v">.</span> <span class="pl-s">**</span>运营商限制<span class="pl-s">**</span>：
   <span class="pl-v">-</span> 家庭宽带通常封锁80/443外所有端口 → 需备案开埠</pre></div>
<hr>
<h2><strong>六、进阶优化建议</strong></h2>
<ol>
<li>
<p><strong>动态DNS支持</strong>（适用于非固定IP）</p>
<div class="highlight highlight-text-md"><pre class="notranslate"><span class="pl-v">-</span> 使用花生壳/No-IP服务绑定域名
<span class="pl-v">-</span> 配置路由器DDNS自动更新</pre></div>
</li>
<li>
<p><strong>IPv4/IPv6双栈部署</strong></p>
<div class="highlight highlight-source-ini"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> fabric服务器启动参数</span>
java -<span class="pl-k">Djava.net.preferIPv6Addresses</span>=true -jar fabric-server-launch.jar</pre></div>
</li>
</ol>
<hr>
<h2><strong>七、内网穿透解决方案</strong></h2>
<h3><strong>1. 内网穿透核心原理</strong></h3>
<pre lang="plaintext" class="notranslate"><code class="notranslate"> 玩家客户端 → 穿透服务器（公网） → 穿透客户端（本地） → Minecraft服务器
       ↑                                         |
       |___________ 反向隧道连接 __________________↓
</code></pre>
<blockquote>
<p><strong>技术本质</strong>：通过第三方公网服务器建立"反向代理隧道"，绕过NAT限制</p>
</blockquote>
<h3><strong>2. 主流穿透方案对比</strong></h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th><strong>方案类型</strong></th>
<th>代表工具</th>
<th>延迟影响</th>
<th>配置复杂度</th>
<th>适用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>TCP/UDP隧道</strong></td>
<td>frp / ngrok</td>
<td>20-50ms</td>
<td>中等</td>
<td>常规MC服务器</td>
</tr>
<tr>
<td><strong>P2P穿透</strong></td>
<td>ZeroTier / Tailscale</td>
<td>5-15ms</td>
<td>简单</td>
<td>好友联机/低延迟需求</td>
</tr>
<tr>
<td><strong>WebSocket隧道</strong></td>
<td>Cloudflared</td>
<td>50-100ms</td>
<td>复杂</td>
<td>严格防火墙环境</td>
</tr>
<tr>
<td><strong>商业托管服务</strong></td>
<td>Playit.gg</td>
<td>30-80ms</td>
<td>极简</td>
<td>零配置快速部署</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3><strong>3. 详细配置指南</strong></h3>
<h4><strong>方案实例：frp穿透（推荐）</strong></h4>
<ul>
<li>
<p><strong>sakurafrp</strong></p>
<p>此网站提供了较为简便与廉价的局域网穿透工具，网址→<a href="https://www.natfrp.com/" rel="nofollow">sakurafrp</a></p>
<p>下方为网站视频教学网址↓</p>
<p><a href="https://www.bilibili.com/video/BV1DdF4eJEBm/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">都2025年了你还不会使用樱花来我的世界联机？[Minecraft樱花内网穿透（Natfrp）联机教程]</a></p>
</li>
</ul>
<p><strong>注：上述为网络连通性专业文档，可配合下述视频搭配学习理解</strong></p>
<p><a href="https://www.bilibili.com/video/BV1rq4y117uA/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">基础开服教程</a></p>
<p><a href="https://www.bilibili.com/video/BV1xj411v7Xd/?spm_id_from=333.1387.favlist.content.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">Windows命令初学者必需知道</a></p>
<p><a href="https://www.bilibili.com/video/BV1HT411U7jV/?spm_id_from=333.1387.favlist.content.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">子网划分</a></p>
<p><a href="https://www.bilibili.com/video/BV1pS4y1B73f/?spm_id_from=333.1387.favlist.content.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">【MC开服】插件、模组我全都要！mohist服务端教学</a></p>
<p><a href="https://www.bilibili.com/video/BV1NQ4y1U7nS/?spm_id_from=333.1387.favlist.content.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">Windows我的世界开服详细教程</a></p>
<p><a href="https://www.bilibili.com/video/BV1Lb4y1o7SF/?spm_id_from=333.1387.favlist.content.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">【mc开服】教你白嫖运营商公网ipv6跟好兄弟联机</a></p>
<p><a href="https://www.bilibili.com/video/BV19EyVYVEye/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">什么是NAT？一分钟搞懂网络地址转换的秘密！</a></p>
<ul>
<li>
<p>以下为进阶视频教学</p>
<p><a href="https://www.bilibili.com/video/BV1Gz4y1r791/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">小白成神之路，网络知识看这一期足矣！软路由 桥接 端口转发 旁路由 单臂路由 IPv4 IPv6 DDNS</a></p>
</li>
</ul>
<h1>防火墙设置</h1>
<hr>
<h3><strong>Minecraft Java版 Windows 开服防火墙设置指南</strong></h3>
<p><strong>核心目标</strong>：允许合法流量进入服务器，阻止非法访问，保障服务器安全。</p>
<hr>
<h4><strong>一、必须开放的端口</strong></h4>
<ol>
<li>
<p><strong>主服务端口（TCP）</strong></p>
<ul>
<li><strong>默认端口：<code class="notranslate">25565</code></strong>
<ul>
<li>修改位置：<code class="notranslate">server.properties</code> 文件中的 <code class="notranslate">server-port=</code> 参数。</li>
</ul>
</li>
<li><strong>防火墙必须允许此端口的入站连接</strong>。</li>
<li><g-emoji class="g-emoji" alias="warning">⚠️</g-emoji> 若修改默认端口（如改为 <code class="notranslate">25575</code>），防火墙规则需同步更新。</li>
</ul>
</li>
<li>
<p><strong>查询端口（UDP - 可选）</strong></p>
<ul>
<li><strong>默认端口：<code class="notranslate">25565</code></strong>（与主端口相同）
<ul>
<li>需在 <code class="notranslate">server.properties</code> 中启用 <code class="notranslate">enable-query=true</code>。</li>
</ul>
</li>
<li>仅当客户端需要服务器状态查询时才开放（UDP协议）。</li>
</ul>
</li>
</ol>
<hr>
<h4><strong>二、防火墙设置步骤（以 Windows Defender 防火墙为例）</strong></h4>
<h5><strong>方法 1：通过图形界面设置</strong></h5>
<ol>
<li>打开 <strong>控制面板</strong> &gt; <strong>系统和安全</strong> &gt; <strong>Windows Defender 防火墙</strong> &gt; <strong>高级设置</strong>。</li>
<li>选择 <strong>入站规则</strong> &gt; <strong>新建规则</strong>。</li>
<li>规则类型：选择 <strong>端口</strong> → 下一步。</li>
<li>协议：
<ul>
<li>主端口选择 <strong>TCP</strong>，特定端口：<code class="notranslate">25565</code>（或自定义端口）。</li>
<li>若需UDP查询，额外创建一条 <strong>UDP</strong> 规则。</li>
</ul>
</li>
<li>操作：选择 <strong>允许连接</strong> → 下一步。</li>
<li>配置文件：勾选 <strong>域、专用、公用</strong>（建议测试时仅勾选“专用”）。</li>
<li>名称：填写 <code class="notranslate">Minecraft Server (TCP 25565)</code> → 完成。</li>
</ol>
<h5><strong>方法 2：通过命令快速开放端口（管理员权限运行CMD）</strong></h5>
<div class="highlight highlight-source-batchfile"><pre class="notranslate"><span class="pl-k">netsh</span> advfirewall firewall add rule name=<span class="pl-s"><span class="pl-pds">"</span>Minecraft TCP 25565<span class="pl-pds">"</span></span> dir=in action=allow protocol=TCP localport=<span class="pl-c1">25565</span>
<span class="pl-k">netsh</span> advfirewall firewall add rule name=<span class="pl-s"><span class="pl-pds">"</span>Minecraft UDP 25565<span class="pl-pds">"</span></span> dir=in action=allow protocol=UDP localport=<span class="pl-c1">25565</span></pre></div>
<hr>
<h4><strong>三、关键安全注意事项</strong></h4>
<ol>
<li>
<p><strong>禁止开放敏感端口</strong></p>
<ul>
<li>❌ 切勿开放 <code class="notranslate">22 (SSH)</code>、<code class="notranslate">3389 (远程桌面/RDP)</code>、<code class="notranslate">3306 (MySQL)</code> 等端口到公网。</li>
<li>✅ 正确做法：使用 <strong>VPN</strong> 或 <strong>跳板机</strong> 管理服务器，或仅限本地访问。</li>
</ul>
</li>
<li>
<p><strong>限制IP访问来源（企业级安全）</strong></p>
<ul>
<li>在防火墙规则中设置 <strong>“作用域”</strong>：
<ul>
<li>仅允许特定IP段（如公司网络）访问 <code class="notranslate">25565</code> 端口。</li>
<li>操作：编辑入站规则 &gt; 切换到 <strong>“作用域”</strong> 标签 &gt; 在 <strong>远程IP地址</strong> 中添加允许的IP。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>关闭未使用的端口</strong></p>
<ul>
<li>定期检查入站规则，删除不再需要的规则（如旧测试端口）。</li>
</ul>
</li>
<li>
<p><strong>警惕内网穿透工具的风险</strong></p>
<ul>
<li>若使用 <strong>frp/ngrok</strong> 等工具，确保其配置的端口不暴露敏感服务。</li>
</ul>
</li>
<li>
<p><strong>验证端口实际开放情况</strong></p>
<ul>
<li>使用 <a href="https://canyouseeme.org" rel="nofollow">canyouseeme.org</a> 或 <code class="notranslate">telnet 你的公网IP 25565</code> 测试端口是否通畅。</li>
</ul>
</li>
</ol>
<hr>
<h4><strong>四、Windows Server 特别优化</strong>（若系统非Windows Server可忽略）</h4>
<ol>
<li><strong>禁用无关服务</strong>
<ul>
<li>关闭 SMB、NetBIOS 等易受攻击的服务：
<div class="highlight highlight-source-batchfile"><pre class="notranslate"><span class="pl-k">sc</span> config LanmanServer start= disabled
<span class="pl-k">sc</span> config LanmanWorkstation start= disabled</pre></div>
</li>
</ul>
</li>
<li><strong>启用日志监控</strong>
<ul>
<li>在防火墙规则中启用 <strong>“记录连接”</strong>（属性 &gt; 常规 &gt; 记录事件），定期检查安全日志。</li>
</ul>
</li>
</ol>
<hr>
<h4><strong>五、网络拓扑建议</strong></h4>
<div class="highlight highlight-source-mermaid"><pre class="notranslate"><span class="pl-k">graph</span> <span class="pl-c1">LR</span>
  <span class="pl-ent">A</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>公网玩家<span class="pl-pds"><span class="pl-sg">]</span></span></span> <span class="pl-k">--&gt;</span> <span class="pl-ent">B</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">{</span></span>路由器/防火墙<span class="pl-pds"><span class="pl-sg">}</span></span></span>
  <span class="pl-ent">B</span> <span class="pl-k">--&gt;</span><span class="pl-k">|</span><span class="pl-s">端口转发 25565</span><span class="pl-k">|</span> <span class="pl-ent">C</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>Windows 服务器<span class="pl-pds"><span class="pl-sg">]</span></span></span>
  <span class="pl-ent">C</span> <span class="pl-k">--&gt;</span><span class="pl-k">|</span><span class="pl-s">仅允许25565入站</span><span class="pl-k">|</span> <span class="pl-ent">D</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>Windows 防火墙<span class="pl-pds"><span class="pl-sg">]</span></span></span>
  <span class="pl-ent">D</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">E</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>Minecraft 服务进程<span class="pl-pds"><span class="pl-sg">]</span></span></span>
  <span class="pl-k">subgraph</span> 本地网络
    <span class="pl-ent">C</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">F</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>管理员 via RDP/VPN<span class="pl-pds"><span class="pl-sg">]</span></span></span>
  <span class="pl-k">end</span></pre></div>
<hr>
<h4><strong>六、故障排查</strong></h4>
<ul>
<li>
<p><strong>问题</strong>：客户端显示“无法连接至服务器”。<br>
<strong>解决步骤</strong>：</p>
<ol>
<li>检查 <code class="notranslate">server.properties</code> 中的端口是否与防火墙规则一致。</li>
<li>运行 <code class="notranslate">netstat -ano | findstr :25565</code> 确认服务是否监听。</li>
<li>临时关闭防火墙测试是否为规则问题。</li>
</ol>
</li>
<li>
<p><strong>问题</strong>：服务器本地可连，外网无法访问。<br>
<strong>原因</strong>：路由器未做 <strong>端口转发（Port Forwarding）</strong>，需将路由器的 <code class="notranslate">25565</code> 端口指向服务器内网IP。</p>
</li>
</ul>
<hr>
<h3><strong>总结清单</strong></h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>步骤</th>
<th>操作要点</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. 确认服务端口</td>
<td>修改 <code class="notranslate">server.properties</code></td>
</tr>
<tr>
<td>2. 开放防火墙入站</td>
<td>允许TCP/UDP特定端口</td>
</tr>
<tr>
<td>3. 路由器端口转发</td>
<td>映射公网IP:25565 → 服务器内网IP</td>
</tr>
<tr>
<td>4. 限制访问范围</td>
<td>设置IP白名单（企业级必需）</td>
</tr>
<tr>
<td>5. 关闭无关端口</td>
<td>禁用RDP/SMB等公网暴露</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<blockquote>
<p><strong>最后建议</strong>：首次开服后，使用 <a href="https://www.shodan.io/" rel="nofollow">Shodan</a> 扫描您的公网IP，确认无多余端口暴露。定期更新Java和Windows系统补丁，防止漏洞攻击。</p>
<p><strong>视频教程→</strong><a href="https://www.bilibili.com/video/BV1hV4y1T7Rr/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c8d0f1ade16bb6d69206a3cdb0173a57" rel="nofollow">1-8shodan搜索技巧</a></p>
</blockquote>
<h1>server.properties详解</h1>
<hr>
<h3><strong>Minecraft 1.19.4 服务端 <code class="notranslate">server.properties</code> 文件详解</strong></h3>
<hr>
<h3><strong>一、文件核心作用</strong></h3>
<p><code class="notranslate">server.properties</code> 是 <strong>Minecraft 服务端的全局控制中枢</strong>，用于定义服务器的核心运行规则和基础配置。主要作用包括：</p>
<ol>
<li><strong>基础参数定义</strong> - 设置服务器端口、名称、玩家容量等基础属性</li>
<li><strong>游戏规则控制</strong> - 配置游戏模式、难度、PVP、死亡惩罚等核心机制</li>
<li><strong>世界生成管理</strong> - 控制地形类型、结构生成、世界边界等</li>
<li><strong>性能优化调节</strong> - 调整视距、模拟距离、网络压缩等关键性能参数</li>
<li><strong>安全策略配置</strong> - 管理正版验证、白名单、RCON远程控制等安全措施</li>
<li><strong>功能开关控制</strong> - 启停下界、末地、飞行、命令方块等关键功能</li>
</ol>
<hr>
<h3><strong>二、文件基础信息</strong></h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>位置</strong></td>
<td>服务端根目录（与 <code class="notranslate">server.jar</code> 同级）</td>
</tr>
<tr>
<td><strong>生成方式</strong></td>
<td>首次启动服务端时自动创建</td>
</tr>
<tr>
<td><strong>修改生效</strong></td>
<td>需重启服务端（部分参数可通过 <code class="notranslate">/reload</code> 生效）</td>
</tr>
<tr>
<td><strong>注释符号</strong></td>
<td><code class="notranslate">#</code> 开头的行视为注释</td>
</tr>
<tr>
<td><strong>格式规范</strong></td>
<td>每行一个参数，格式为 <code class="notranslate">参数名=值</code>（<strong>值不可加引号</strong>）</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<hr>
<h3><strong>三、参数分类详解</strong></h3>
<h4><strong>1. 基础网络设置</strong></h4>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名</th>
<th>默认值</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">server-port</code></td>
<td><code class="notranslate">25565</code></td>
<td>主服务端口（需在防火墙开放此端口）</td>
</tr>
<tr>
<td><code class="notranslate">query.port</code></td>
<td><code class="notranslate">25565</code></td>
<td>服务器状态查询端口（与主端口一致）</td>
</tr>
<tr>
<td><code class="notranslate">motd</code></td>
<td><code class="notranslate">A Minecraft Server</code></td>
<td>服务器名称（支持颜色代码 <code class="notranslate">§</code> 或 <code class="notranslate">&amp;</code>）</td>
</tr>
<tr>
<td><code class="notranslate">enable-query</code></td>
<td><code class="notranslate">false</code></td>
<td>是否开启 GameSpy4 协议查询（服务器状态工具使用）</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h4><strong>2. 世界生成配置</strong></h4>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名</th>
<th>默认值</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">level-name</code></td>
<td><code class="notranslate">world</code></td>
<td>世界文件夹名称（对应 <code class="notranslate">./world/</code> 目录）</td>
</tr>
<tr>
<td><code class="notranslate">level-type</code></td>
<td><code class="notranslate">default</code></td>
<td>世界类型：<code class="notranslate">default</code>(标准)/<code class="notranslate">flat</code>(超平坦)/<code class="notranslate">largebiomes</code>(巨型生物群系)</td>
</tr>
<tr>
<td><code class="notranslate">generator-settings</code></td>
<td><code class="notranslate">{}</code></td>
<td>自定义世界生成器（JSON格式，需手动配置）</td>
</tr>
<tr>
<td><code class="notranslate">spawn-protection</code></td>
<td><code class="notranslate">16</code></td>
<td>出生点保护半径（0=禁用保护，建议管理员服设为 <code class="notranslate">0</code>）</td>
</tr>
<tr>
<td><code class="notranslate">max-world-size</code></td>
<td><code class="notranslate">29999984</code></td>
<td>世界边界最大半径（单位：方块）</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h4><strong>3. 核心游戏规则</strong></h4>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名</th>
<th>默认值</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">gamemode</code></td>
<td><code class="notranslate">survival</code></td>
<td>默认游戏模式：<code class="notranslate">survival</code>/<code class="notranslate">creative</code>/<code class="notranslate">adventure</code>/<code class="notranslate">spectator</code></td>
</tr>
<tr>
<td><code class="notranslate">difficulty</code></td>
<td><code class="notranslate">easy</code></td>
<td>难度等级：<code class="notranslate">peaceful</code>/<code class="notranslate">easy</code>/<code class="notranslate">normal</code>/<code class="notranslate">hard</code></td>
</tr>
<tr>
<td><code class="notranslate">hardcore</code></td>
<td><code class="notranslate">false</code></td>
<td>是否启用极限模式（死亡后无法复活）</td>
</tr>
<tr>
<td><code class="notranslate">pvp</code></td>
<td><code class="notranslate">true</code></td>
<td>是否允许玩家间攻击</td>
</tr>
<tr>
<td><code class="notranslate">max-players</code></td>
<td><code class="notranslate">20</code></td>
<td>最大玩家数量（实际容量取决于服务器性能）</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h4><strong>4. 性能优化参数</strong></h4>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名</th>
<th>默认值</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">view-distance</code></td>
<td><code class="notranslate">10</code></td>
<td>客户端可视区块距离（<strong>推荐6-12</strong>，过高导致卡顿）</td>
</tr>
<tr>
<td><code class="notranslate">simulation-distance</code></td>
<td><code class="notranslate">10</code></td>
<td>服务器逻辑处理距离（1.18+新增，<strong>性能关键参数</strong>)</td>
</tr>
<tr>
<td><code class="notranslate">network-compression-threshold</code></td>
<td><code class="notranslate">256</code></td>
<td>网络压缩阈值（-1=禁用，0=全部压缩，<strong>推荐512</strong>)</td>
</tr>
<tr>
<td><code class="notranslate">max-tick-time</code></td>
<td><code class="notranslate">60000</code></td>
<td>单tick最大处理时间（毫秒，超时触发看门狗重启）</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h4><strong>5. 安全控制策略</strong></h4>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名</th>
<th>默认值</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">online-mode</code></td>
<td><code class="notranslate">true</code></td>
<td>正版验证（关闭后离线玩家可进服，但无皮肤）</td>
</tr>
<tr>
<td><code class="notranslate">enforce-secure-profile</code></td>
<td><code class="notranslate">true</code></td>
<td>强制聊天签名（1.19.4+新增，<strong>离线服需关闭</strong>)</td>
</tr>
<tr>
<td><code class="notranslate">white-list</code></td>
<td><code class="notranslate">false</code></td>
<td>是否启用白名单（需配合 <code class="notranslate">whitelist.json</code> 使用）</td>
</tr>
<tr>
<td><code class="notranslate">enable-rcon</code></td>
<td><code class="notranslate">false</code></td>
<td>启用远程控制（RCON）</td>
</tr>
<tr>
<td><code class="notranslate">rcon.password</code></td>
<td>空</td>
<td>RCON密码（<strong>必须设置高强度密码</strong>）</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h4><strong>6. 功能开关管理</strong></h4>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>参数名</th>
<th>默认值</th>
<th>作用说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">allow-nether</code></td>
<td><code class="notranslate">true</code></td>
<td>是否允许进入下界维度</td>
</tr>
<tr>
<td><code class="notranslate">generate-structures</code></td>
<td><code class="notranslate">true</code></td>
<td>是否生成村庄/要塞等结构</td>
</tr>
<tr>
<td><code class="notranslate">allow-flight</code></td>
<td><code class="notranslate">false</code></td>
<td>是否允许飞行（<strong>模组服必须开启</strong>)</td>
</tr>
<tr>
<td><code class="notranslate">enable-command-block</code></td>
<td><code class="notranslate">false</code></td>
<td>是否启用命令方块</td>
</tr>
<tr>
<td><code class="notranslate">initial-disabled-packs</code></td>
<td>空</td>
<td>初始禁用的数据包（逗号分隔名称）</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<hr>
<h3><strong>四、关键配置优化方案</strong></h3>
<h4>1. <strong>10-20人小型服推荐</strong></h4>
<div class="highlight highlight-source-ini"><pre class="notranslate"><span class="pl-k">view-distance</span>=8
<span class="pl-k">simulation-distance</span>=6
<span class="pl-k">max-tick-time</span>=120000
<span class="pl-k">network-compression-threshold</span>=512</pre></div>
<h4>2. <strong>安全加固配置</strong></h4>
<div class="highlight highlight-source-ini"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 启用白名单+RCON双重防护</span>
<span class="pl-k">white-list</span>=true
<span class="pl-k">enforce-whitelist</span>=true
<span class="pl-k">enable-rcon</span>=true
<span class="pl-k">rcon.port</span>=49999  <span class="pl-c"><span class="pl-c">#</span> 修改默认端口</span>
<span class="pl-k">rcon.password</span>=T0p$3cret!P@ss  <span class="pl-c"><span class="pl-c">#</span> 12位以上复杂密码</span>

<span class="pl-c"><span class="pl-c">#</span> 关闭非必要功能</span>
<span class="pl-k">allow-flight</span>=false
<span class="pl-k">enable-command-block</span>=false</pre></div>
<hr>
<h3><strong>五、注意事项</strong></h3>
<ol>
<li><strong>格式陷阱</strong>：值禁止加引号（正确：<code class="notranslate">motd=生存服</code>，错误：<code class="notranslate">motd="生存服"</code>）</li>
<li><strong>版本特性</strong>：
<ul>
<li><code class="notranslate">enforce-secure-profile</code>（1.19.4新增）：关闭后非正版玩家才能正常聊天</li>
<li><code class="notranslate">simulation-distance</code>（1.18+）：比 <code class="notranslate">view-distance</code> 更影响性能</li>
</ul>
</li>
<li><strong>热重载限制</strong>：以下参数<strong>必须重启</strong>才能生效：
<ul>
<li><code class="notranslate">level-type</code> / <code class="notranslate">spawn-protection</code> / <code class="notranslate">server-port</code></li>
<li><code class="notranslate">enable-rcon</code> / <code class="notranslate">rcon.port</code></li>
</ul>
</li>
<li><strong>第三方服务端</strong>：Paper/Spigot 等核心会扩展额外参数（如 <code class="notranslate">paper.yml</code>）</li>
</ol>
<hr>
<h3><strong>六、配置示例</strong></h3>
<div class="highlight highlight-source-ini"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> ===== 基础设置 =====</span>
<span class="pl-k">motd</span>=§6[1.19.4] §b生存联盟 §e| §a无作弊
<span class="pl-k">server-port</span>=25565
<span class="pl-k">max-players</span>=30

<span class="pl-c"><span class="pl-c">#</span> ===== 世界规则 =====</span>
<span class="pl-k">level-name</span>=Survival_World
<span class="pl-k">gamemode</span>=survival
<span class="pl-k">difficulty</span>=hard
<span class="pl-k">pvp</span>=true
<span class="pl-k">spawn-protection</span>=0

<span class="pl-c"><span class="pl-c">#</span> ===== 性能优化 =====</span>
<span class="pl-k">view-distance</span>=10
<span class="pl-k">simulation-distance</span>=8
<span class="pl-k">network-compression-threshold</span>=512

<span class="pl-c"><span class="pl-c">#</span> ===== 安全控制 =====</span>
<span class="pl-k">online-mode</span>=true
<span class="pl-k">enforce-secure-profile</span>=false
<span class="pl-k">white-list</span>=true
<span class="pl-k">rcon.password</span>=7e$gH2@Kp9!zWx

<span class="pl-c"><span class="pl-c">#</span> ===== 功能管理 =====</span>
<span class="pl-k">allow-flight</span>=true
<span class="pl-k">generate-structures</span>=true
<span class="pl-k">enable-command-block</span>=false</pre></div>
<hr>
<blockquote>
<p><strong>附：实时调整命令</strong><br>
部分参数可通过命令动态修改（无需重启）：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">/difficulty hard          <span class="pl-c"><span class="pl-c">#</span> 切换难度</span>
/gamerule keepInventory <span class="pl-c1">true</span> <span class="pl-c"><span class="pl-c">#</span> 死亡不掉落</span>
/whitelist on             <span class="pl-c"><span class="pl-c">#</span> 启用白名单</span>
/setidletimeout 30        <span class="pl-c"><span class="pl-c">#</span> 挂机30分钟踢出</span></pre></div>
<p><strong>警告</strong>：修改后需执行 <code class="notranslate">/save-all</code> 保存配置变更！</p>
</blockquote>
<p>通过合理配置此文件，可显著提升服务器性能、安全性和游戏体验。建议每次修改前备份原始文件。</p>
<h1>Minecraft 1.19.4 服务端管理注意事项指南（后期）</h1>
<h2>一、安全防护管理</h2>
<h3>1.1 账户与访问安全</h3>
<ul>
<li>
<p><strong>白名单强制启用</strong></p>
<div class="highlight highlight-source-ini"><pre class="notranslate"><span class="pl-k">white-list</span>=true
<span class="pl-k">enforce-whitelist</span>=true</pre></div>
<p>定期审核<code class="notranslate">whitelist.json</code>文件，移除不活跃玩家</p>
</li>
<li>
<p><strong>操作权限分级</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">/op [玩家]  <span class="pl-c"><span class="pl-c">#</span> 谨慎授予</span>
/deop [玩家] <span class="pl-c"><span class="pl-c">#</span> 定期审查</span></pre></div>
<p>使用权限插件实现精细控制</p>
</li>
</ul>
<h3>1.2 网络安全防护</h3>
<ul>
<li>
<p><strong>防火墙配置</strong></p>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 仅开放必要端口</span>
sudo ufw allow 25565/tcp  <span class="pl-c"><span class="pl-c">#</span> 主服务端口</span>
sudo ufw allow 25575/tcp  <span class="pl-c"><span class="pl-c">#</span> RCON端口（若使用）</span>
sudo ufw <span class="pl-c1">enable</span></pre></div>
</li>
<li>
<p><strong>DDoS防护</strong></p>
<ul>
<li>启用Cloudflare等防护服务</li>
<li>配置<code class="notranslate">server.properties</code>降低负载：
<div class="highlight highlight-source-ini"><pre class="notranslate"><span class="pl-k">view-distance</span>=6
<span class="pl-k">simulation-distance</span>=4
<span class="pl-k">max-players</span>=20</pre></div>
</li>
</ul>
</li>
</ul>
<h3>1.3 插件安全</h3>
<ul>
<li><strong>来源验证</strong>
<ul>
<li>仅从官方来源获取插件：SpigotMC、Bukkit、Modrinth</li>
<li>检查SHA-256哈希值验证完整性</li>
</ul>
</li>
</ul>
<h2>二、性能优化管理</h2>
<h3>2.1 JVM参数优化</h3>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 启动脚本优化示例（4GB内存服务器）</span>
java -Xms3G -Xmx3G -XX:+UseG1GC -XX:+UnlockExperimentalVMOptions \
-XX:MaxGCPauseMillis=100 -XX:+ParallelRefProcEnabled \
-XX:MaxTenuringThreshold=15 -jar server.jar nogui</pre></div>
<ul>
<li><strong>关键参数说明</strong>
<ul>
<li><code class="notranslate">-Xms3G -Xmx3G</code>：固定堆内存大小减少GC</li>
<li><code class="notranslate">-XX:+UseG1GC</code>：G1垃圾收集器适合MC</li>
<li><code class="notranslate">-XX:MaxGCPauseMillis=100</code>：控制GC停顿时间</li>
</ul>
</li>
</ul>
<h3>2.2 服务端参数优化</h3>
<div class="highlight highlight-source-ini"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> server.properties优化</span>
<span class="pl-k">view-distance</span>=8
<span class="pl-k">simulation-distance</span>=6
<span class="pl-k">max-tick-time</span>=120000
<span class="pl-k">network-compression-threshold</span>=512</pre></div>
<h3>2.3 定期维护任务</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>任务</th>
<th>频率</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>区块清理</td>
<td>每周</td>
<td><code class="notranslate">/minecraft:trim</code></td>
</tr>
<tr>
<td>实体清理</td>
<td>每天</td>
<td><code class="notranslate">/kill @e[type=item,distance=..100]</code></td>
</tr>
<tr>
<td>重启服务</td>
<td>每天</td>
<td>使用脚本定时重启</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h2>三、数据备份管理</h2>
<h3>3.1 备份策略</h3>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 简易备份脚本</span>
<span class="pl-c"><span class="pl-c">#!</span>/bin/bash</span>
BACKUP_DIR=<span class="pl-s"><span class="pl-pds">"</span>/backups/minecraft<span class="pl-pds">"</span></span>
DATE=<span class="pl-s"><span class="pl-pds">$(</span>date +%Y%m%d-%H%M%S<span class="pl-pds">)</span></span>
tar -czf <span class="pl-smi">$BACKUP_DIR</span>/world-<span class="pl-smi">$DATE</span>.tar.gz world/
find <span class="pl-smi">$BACKUP_DIR</span> -type f -mtime +7 -delete  <span class="pl-c"><span class="pl-c">#</span> 删除7天前备份</span></pre></div>
<h3>3.2 备份方案对比</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>方案</th>
<th>优点</th>
<th>缺点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>完整备份</td>
<td>恢复简单</td>
<td>占用空间大</td>
<td>小型服务器</td>
</tr>
<tr>
<td>增量备份</td>
<td>节省空间</td>
<td>恢复复杂</td>
<td>大型服务器</td>
</tr>
<tr>
<td>云存储</td>
<td>异地安全</td>
<td>依赖网络</td>
<td>所有规模</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3>3.3 恢复测试流程</h3>
<ol>
<li>创建测试环境目录 <code class="notranslate">mkdir restore-test</code></li>
<li>解压备份文件 <code class="notranslate">tar -xzf backup.tar.gz -C restore-test/</code></li>
<li>修改<code class="notranslate">server.properties</code>的<code class="notranslate">level-name=restore-test</code></li>
<li>启动服务端验证数据完整性</li>
</ol>
<h2>四、更新与维护管理</h2>
<h3>4.1 服务端更新流程</h3>
<ol>
<li>关闭服务器 <code class="notranslate">/stop</code></li>
<li>备份完整服务端目录</li>
<li>下载新版server.jar</li>
<li>测试启动新版服务端</li>
<li>检查插件兼容性</li>
<li>正式更新并公告</li>
</ol>
<h3>4.2 插件更新原则</h3>
<ol>
<li>一次更新一个插件</li>
<li>更新后观察日志24小时</li>
<li>保留旧版本插件文件</li>
<li>玩家数据插件先备份后更新</li>
</ol>
<h2>五、监控与日志分析</h2>
<h3>5.1 关键监控指标</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>指标</th>
<th>正常范围</th>
<th>检查命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>TPS</td>
<td>20±0.1</td>
<td><code class="notranslate">/tps</code></td>
<td>低于18需优化</td>
</tr>
<tr>
<td>内存</td>
<td>&lt;85%</td>
<td><code class="notranslate">/gc</code></td>
<td>超过触发GC</td>
</tr>
<tr>
<td>实体数</td>
<td>&lt;2000</td>
<td><code class="notranslate">/data get entity</code></td>
<td>过多导致卡顿</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3>5.2 日志监控要点</h3>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 查看实时日志</span>
tail -f logs/latest.log

<span class="pl-c"><span class="pl-c">#</span> 常见关键词警报</span>
grep -E <span class="pl-s"><span class="pl-pds">"</span>ERROR|Exception|Can't keep up<span class="pl-pds">"</span></span> logs/latest.log</pre></div>
<h3>5.3 监控工具推荐</h3>
<ul>
<li><strong>Prometheus + Grafana</strong>：专业级监控可视化</li>
<li><strong>Spark Profiler</strong>：轻量级性能分析</li>
<li><strong>Discord Webhook</strong>：异常实时通知</li>
</ul>
<h2>六、灾难恢复计划</h2>
<h3>7.1 常见灾难场景</h3>
<ol>
<li><strong>世界损坏</strong>：区块加载失败/崩溃</li>
<li><strong>数据丢失</strong>：误删玩家数据</li>
<li><strong>黑客攻击</strong>：服务器被入侵</li>
<li><strong>硬件故障</strong>：硬盘损坏</li>
</ol>
<h3>7.2 恢复流程</h3>
<div class="highlight highlight-source-mermaid"><pre class="notranslate"><span class="pl-k">graph</span> <span class="pl-c1">LR</span>
<span class="pl-ent">A</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>发现故障<span class="pl-pds"><span class="pl-sg">]</span></span></span> <span class="pl-k">--&gt;</span> <span class="pl-ent">B</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">{</span></span>故障类型<span class="pl-pds"><span class="pl-sg">}</span></span></span>
<span class="pl-ent">B</span> <span class="pl-k">--&gt;</span><span class="pl-k">|</span><span class="pl-s">世界损坏</span><span class="pl-k">|</span> <span class="pl-ent">C</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>恢复最近备份<span class="pl-pds"><span class="pl-sg">]</span></span></span>
<span class="pl-ent">B</span> <span class="pl-k">--&gt;</span><span class="pl-k">|</span><span class="pl-s">数据丢失</span><span class="pl-k">|</span> <span class="pl-ent">D</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>从增量备份恢复<span class="pl-pds"><span class="pl-sg">]</span></span></span>
<span class="pl-ent">B</span> <span class="pl-k">--&gt;</span><span class="pl-k">|</span><span class="pl-s">黑客攻击</span><span class="pl-k">|</span> <span class="pl-ent">E</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>隔离服务器+审计日志<span class="pl-pds"><span class="pl-sg">]</span></span></span>
<span class="pl-ent">B</span> <span class="pl-k">--&gt;</span><span class="pl-k">|</span><span class="pl-s">硬件故障</span><span class="pl-k">|</span> <span class="pl-ent">F</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>启用备用服务器<span class="pl-pds"><span class="pl-sg">]</span></span></span>
<span class="pl-ent">C</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">G</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>验证恢复<span class="pl-pds"><span class="pl-sg">]</span></span></span>
<span class="pl-ent">D</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">G</span>
<span class="pl-ent">E</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">G</span>
<span class="pl-ent">F</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">G</span>
<span class="pl-ent">G</span> <span class="pl-k">--&gt;</span> <span class="pl-ent">H</span><span class="pl-s"><span class="pl-pds"><span class="pl-sg">[</span></span>事后分析报告<span class="pl-pds"><span class="pl-sg">]</span></span></span></pre></div>
<h3>7.3 应急预案</h3>
<ul>
<li><strong>备用服务器</strong>：保持冷备服务器待命</li>
<li><strong>紧急联系人</strong>：建立管理员24小时轮值</li>
</ul>
<blockquote>
<p><strong>最佳实践提示</strong>：</p>
<ol>
<li>每次重大变更前执行完整备份</li>
<li>使用版本控制管理配置文件和脚本</li>
<li>维护详细的变更日志：记录每次配置修改和插件更新</li>
</ol>
</blockquote>
<h1>网络诊断</h1>
<hr>
<h4><strong>一、基础网络环境检查</strong></h4>
<ol>
<li>
<p><strong>服务器本地网络</strong></p>
<ul>
<li>运行 <code class="notranslate">ipconfig</code>（Windows）或 <code class="notranslate">ifconfig</code>（Linux）检查本机IP和网关。</li>
<li>测试外网连通性：
<div class="highlight highlight-source-shell"><pre class="notranslate">ping 8.8.8.8  <span class="pl-c"><span class="pl-c">#</span> 测试基础网络</span>
ping www.baidu.com  <span class="pl-c"><span class="pl-c">#</span> 测试DNS解析</span></pre></div>
</li>
<li><strong>若本地网络异常</strong>：重启路由器/光猫，检查网线连接。</li>
</ul>
</li>
<li>
<p><strong>端口开放状态（核心）</strong></p>
<ul>
<li><strong>默认端口</strong>：<code class="notranslate">25565</code>（TCP/UDP）</li>
<li>验证端口是否开放：
<div class="highlight highlight-source-shell"><pre class="notranslate">telnet 你的公网IP 25565  <span class="pl-c"><span class="pl-c">#</span> 本地测试（需启用Telnet客户端）</span></pre></div>
</li>
<li>在线工具检测：使用 <a href="https://www.portchecktool.com/" rel="nofollow">PortCheckTool</a></li>
</ul>
</li>
<li>
<p><strong>防火墙检查（仅适用于Windows)</strong></p>
<p>请检查服务端对应端口（默认为25565）是否开放，并且可以结合完全关闭防火墙的方法以检查排除是否为防火墙规则配置错误问题。</p>
</li>
</ol>
<hr>
<h4><strong>二、服务端配置检查</strong></h4>
<ol>
<li>
<p><strong>server.properties 关键参数</strong><br>
确保以下配置正确：</p>
<div class="highlight highlight-source-ini"><pre class="notranslate"><span class="pl-k">server-port</span>=25565
<span class="pl-k">online-mode</span>=true  <span class="pl-c"><span class="pl-c">#</span> 正版验证（若关闭需确保插件兼容）</span>
<span class="pl-k">server-ip</span>=  <span class="pl-c"><span class="pl-c">#</span> 留空（除非绑定多IP）</span></pre></div>
<ul>
<li><strong>注意</strong>：若使用内网穿透，需修改 <code class="notranslate">server-ip</code> 为内网IP（如 <code class="notranslate">192.168.1.100</code>）。</li>
</ul>
</li>
<li>
<p><strong>NAT转发与内网穿透</strong></p>
<ul>
<li>
<p><strong>路由器设置</strong>：<br>
登录路由器管理页 → 端口转发 → 添加规则：</p>
<pre class="notranslate"><code class="notranslate">外部端口：25565 → 内部IP：服务器内网IP → 内部端口：25565
</code></pre>
</li>
<li>
<p><strong>动态DNS（DDNS）</strong>：<br>
若公网IP变动，需使用DDNS服务（如花生壳）。</p>
</li>
</ul>
</li>
</ol>
<hr>
<h4><strong>三、客户端连接问题诊断</strong></h4>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th><strong>错误类型</strong></th>
<th><strong>可能原因</strong></th>
<th><strong>解决方案</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="notranslate">Connection Timed Out</code></td>
<td>端口未开放/防火墙拦截</td>
<td>检查端口转发与防火墙规则</td>
</tr>
<tr>
<td><code class="notranslate">Can't Resolve Host</code></td>
<td>域名解析失败</td>
<td>改用IP直连或检查DNS设置</td>
</tr>
<tr>
<td><code class="notranslate">IOException</code></td>
<td>服务端崩溃/网络波动</td>
<td>查看服务端日志 <code class="notranslate">logs/latest.log</code></td>
</tr>
<tr>
<td><code class="notranslate">Authentication Servers Down</code></td>
<td>Mojang验证服务器宕机</td>
<td>等待修复或临时关闭 <code class="notranslate">online-mode</code></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<hr>
<h4><strong>四、高阶网络工具诊断</strong></h4>
<ol>
<li>
<p><strong>路由追踪（Traceroute）</strong></p>
<ul>
<li>客户端运行：
<div class="highlight highlight-source-shell"><pre class="notranslate">tracert 服务器IP  <span class="pl-c"><span class="pl-c">#</span> Windows</span>
traceroute 服务器IP  <span class="pl-c"><span class="pl-c">#</span> Linux/macOS</span></pre></div>
</li>
<li>分析延迟跃点，定位网络阻塞节点（如某ISP节点丢包）。</li>
</ul>
</li>
<li>
<p><strong>服务端带宽测试</strong></p>
<ul>
<li>使用 <code class="notranslate">speedtest-cli</code> 测试服务器上行带宽：
<div class="highlight highlight-source-shell"><pre class="notranslate">pip install speedtest-cli
speedtest</pre></div>
</li>
<li><strong>最低要求</strong>：10人服建议 ≥50Mbps 上行带宽。</li>
</ul>
</li>
</ol>
<hr>
<h4><strong>五、常见疑难解答</strong></h4>
<ol>
<li><strong>玩家频繁掉线</strong>
<ul>
<li>检查服务端TPS：使用插件如 <code class="notranslate">Spark</code> 或 <code class="notranslate">/tps</code> 命令（需Paper端）。</li>
<li>分析带宽占用：<code class="notranslate">nethogs</code>（Linux）或资源监视器（Windows）。</li>
</ul>
</li>
<li><strong>部分地区无法连接</strong>
<ul>
<li>使用第三方节点测试（如阿里云、腾讯云不同地域机器）。</li>
</ul>
</li>
<li><strong>DDoS攻击防护</strong>
<ul>
<li>启用云服务商DDoS基础防护（阿里云/AWS/Azure均提供）。</li>
<li>安装反压测插件：<code class="notranslate">AntiBot</code>（Paper）或 <code class="notranslate">TCPShield</code>。</li>
</ul>
</li>
</ol>
<hr>
<h4><strong>六、推荐优化措施</strong></h4>
<ol>
<li>
<p><strong>服务端优化</strong></p>
<ul>
<li>调整JVM参数（示例）：
<div class="highlight highlight-source-shell"><pre class="notranslate">-Xms4G -Xmx4G -XX:+UseG1GC -XX:MaxGCPauseMillis=150</pre></div>
</li>
</ul>
</li>
</ol>
<hr>
<h4><strong>附录：实用工具清单</strong></h4>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>工具名称</th>
<th>用途</th>
<th>链接</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MTR</strong></td>
<td>网络链路质量分析</td>
<td><a href="https://sourceforge.net/projects/winmtr/" rel="nofollow">WinMTR</a></td>
</tr>
<tr>
<td><strong>PortQry</strong></td>
<td>深度端口检测</td>
<td><a href="https://learn.microsoft.com/en-us/troubleshoot/windows-server/networking/portqry-command-line-port-scanner" rel="nofollow">Microsoft Docs</a></td>
</tr>
<tr>
<td><strong>Wireshark</strong></td>
<td>抓包分析（高级）</td>
<td><a href="https://www.wireshark.org/" rel="nofollow">wireshark.org</a></td>
</tr>
<tr>
<td><strong>Spark Profiler</strong></td>
<td>服务端性能监控</td>
<td><a href="https://spark.lucko.me/" rel="nofollow">spark.lucko.me</a></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<hr>
<blockquote>
<p><strong>重要提醒</strong>：</p>
<ol>
<li>修改配置后<strong>重启服务端</strong>生效。</li>
<li>云服务器需在控制台二次确认安全组规则。</li>
<li>正版验证问题参考 <a href="https://help.minecraft.net/hc/en-us" rel="nofollow">Mojang状态页</a>。</li>
<li>根据实际环境调整细节。建议结合服务端日志（<code class="notranslate">logs/</code> 目录）综合诊断。</li>
</ol>
</blockquote></div>
<div style="font-size:small;margin-top:8px;float:right;"></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://yee01001100.github.io/Mr-liu-yee.github.io">Mr.liu的博客</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if(""!=""){
    var startSite=new Date("");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","yee01001100/Mr-liu-yee.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>


</html>
